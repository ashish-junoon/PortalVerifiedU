
import crif from '../../assets/crif.png';

function CRIFReportData({ response }) {
  const data = {
    "HEADER": {
      "DATE-OF-REQUEST": "22-12-2025",
      "DATE-OF-ISSUE": "22-12-2025",
      "REPORT-ID": "CCR251222CR684035752",
      "BATCH-ID": "4213752313251222",
      "inquiryId_": "13174871448",
      "STATUS": "SUCCESS"
    },
    "REQUEST": {
      "NAME": "ANIL KUMAR",
      "DOB": "03-03-2000",
      "PAN": "ISSPK7055P",
      "EMAIL-1": "kumaranil46650@gmail.com",
      "ADDRESS-1": "S/O: RAM DARASH AJAD NAGAR GHOLA  UP 262902 UP UP UP 262902 Uttar Pradesh",
      "ADDRESS-2": "",
      "ADDRESS-3": "",
      "PHONE-1": "9170734822"
    },
    "PERSONAL-INFO-VARIATION": {
      "NAME-VARIATIONS": {
        "VARIATION": {
          "VALUE": "ANIL KUMAR",
          "REPORTED-DATE": "13-12-2025"
        }
      },
      "ADDRESS-VARIATIONS": {
        "VARIATION": [
          {
            "VALUE": "AJAD NAGAR NIGHASAN, GHOLAUTTAR PRADESH 262902 UP",
            "REPORTED-DATE": "16-05-2022"
          },
          {
            "VALUE": "S/O: RAM DARASH AJAD NAGAR GHOLA  UP 262902 UP",
            "REPORTED-DATE": "13-12-2025"
          },
          {
            "VALUE": "AJAD NAGAR NIGHASAN, GHOLA NIGHASAN, GHOLA 262902 MH",
            "REPORTED-DATE": "16-03-2022"
          },
          {
            "VALUE": "WZ 419 NARAINA VIHAR NEW DELHI  NEW DELHI 110028 DL",
            "REPORTED-DATE": "30-11-2024"
          },
          {
            "VALUE": "AJAD NAGAR NIGHASAN, GHOLA 262902 MH",
            "REPORTED-DATE": "31-05-2021"
          },
          {
            "VALUE": "WZ 370 1 NARAINA VILLAGE WZ 370 1 NARAINA VILLAGE 110028 DL",
            "REPORTED-DATE": "13-10-2025"
          },
          {
            "VALUE": "SO RAM DARASH AJAD NAGAR GHOLA,  KHERI UT TAR PRADESH,  1510 UTTAR PRADESH 262902 UP",
            "REPORTED-DATE": "30-04-2025"
          },
          {
            "VALUE": "1078,   3 64 64 226201 UP",
            "REPORTED-DATE": "15-03-2025"
          },
          {
            "VALUE": "WZ 370 1 NARAINA VILLAGE WZ 370 1 NARAINA VILLAGE   NEAR 110028 DL",
            "REPORTED-DATE": "13-12-2025"
          }
        ]
      },
      "PAN-VARIATIONS": {
        "VARIATION": {
          "VALUE": "ISSPK7055P",
          "REPORTED-DATE": "13-12-2025"
        }
      },
      "UID-VARIATIONS": "",
      "OTHER-ID-VARIATIONS": {
        "VARIATION": {
          "VALUE": "10056426704286",
          "REPORTED-DATE": "13-12-2025"
        }
      },
      "DRIVING-LICENSE-VARIATIONS": "",
      "DATE-OF-BIRTH-VARIATIONS": {
        "VARIATION": {
          "VALUE": "03-03-2000",
          "REPORTED-DATE": "13-12-2025"
        }
      },
      "VOTER-ID-VARIATIONS": "",
      "PASSPORT-VARIATIONS": "",
      "PHONE-NUMBER-VARIATIONS": {
        "VARIATION": [
          {
            "VALUE": "9170734822",
            "REPORTED-DATE": "15-05-2025"
          },
          {
            "VALUE": "7800928002",
            "REPORTED-DATE": "30-04-2025"
          },
          {
            "VALUE": "919170734822",
            "REPORTED-DATE": "13-12-2025"
          }
        ]
      },
      "RATION-CARD-VARIATIONS": "",
      "EMAIL-VARIATIONS": {
        "VARIATION": [
          {
            "VALUE": "kumaranil46650@gmail.com",
            "REPORTED-DATE": "30-11-2024"
          },
          {
            "VALUE": "ABC@XYZ.COM",
            "REPORTED-DATE": "15-05-2025"
          }
        ]
      }
    },
    "SECONDARY-MATCHES": "",
    "ACCOUNTS-SUMMARY": {
      "DERIVED-ATTRIBUTES": {
        "INQURIES-IN-LAST-SIX-MONTHS": "1",
        "LENGTH-OF-CREDIT-HISTORY-YEAR": "2",
        "LENGTH-OF-CREDIT-HISTORY-MONTH": "2",
        "AVERAGE-ACCOUNT-AGE-YEAR": "0",
        "AVERAGE-ACCOUNT-AGE-MONTH": "9",
        "NEW-ACCOUNTS-IN-LAST-SIX-MONTHS": "0",
        "NEW-DELINQ-ACCOUNT-IN-LAST-SIX-MONTHS": "0"
      },
      "PRIMARY-ACCOUNTS-SUMMARY": {
        "PRIMARY-NUMBER-OF-ACCOUNTS": "7",
        "PRIMARY-ACTIVE-NUMBER-OF-ACCOUNTS": "1",
        "PRIMARY-OVERDUE-NUMBER-OF-ACCOUNTS": "0",
        "PRIMARY-SECURED-NUMBER-OF-ACCOUNTS": "0",
        "PRIMARY-UNSECURED-NUMBER-OF-ACCOUNTS": "7",
        "PRIMARY-UNTAGGED-NUMBER-OF-ACCOUNTS": "0",
        "PRIMARY-CURRENT-BALANCE": "14,568",
        "PRIMARY-SANCTIONED-AMOUNT": "23,692",
        "PRIMARY-DISBURSED-AMOUNT": "23,692"
      },
      "SECONDARY-ACCOUNTS-SUMMARY": {
        "SECONDARY-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-ACTIVE-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-OVERDUE-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-SECURED-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-UNSECURED-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-UNTAGGED-NUMBER-OF-ACCOUNTS": "0",
        "SECONDARY-CURRENT-BALANCE": "0",
        "SECONDARY-SANCTIONED-AMOUNT": "0",
        "SECONDARY-DISBURSED-AMOUNT": "0"
      }
    },
    "EMPLOYMENT-DETAILS": {
      "EMPLOYMENT-DETAIL": ""
    },
    "RESPONSES": {
      "RESPONSE": [
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "PDL12417255",
            "CREDIT-GUARANTOR": "KOTAK MAHINDRA BANK",
            "ACCT-TYPE": "Personal Loan",
            "DATE-REPORTED": "31-10-2024",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "4,500",
            "DISBURSED-DT": "18-09-2024",
            "LAST-PAYMENT-DATE": "09-10-2024",
            "CLOSED-DATE": "18-10-2024",
            "INSTALLMENT-AMT": "4,525",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",

            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "Oct:2024,000/XXX|Sep:2024,000/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "1",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "CL20968092",
            "CREDIT-GUARANTOR": "DHANI LOANS AND SERVICES LIMITED",
            "ACCT-TYPE": "Personal Loan",
            "DATE-REPORTED": "15-04-2025",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "15,000",
            "DISBURSED-DT": "22-10-2021",
            "CLOSED-DATE": "26-12-2021",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "Dec:2021,XXX/XXX|Nov:2021,XXX/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "PRINCIPAL-WRITE-OFF-AMT": "0",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "3",
            "SETTLEMENT-AMT": "0"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "TBLV06-10529-3745634",
            "CREDIT-GUARANTOR": "TRUE CREDITS PRIVATE LIMITED",
            "ACCT-TYPE": "Personal Loan",
            "DATE-REPORTED": "31-05-2021",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "1,215",
            "DISBURSED-DT": "29-05-2021",
            "LAST-PAYMENT-DATE": "30-05-2021",
            "CLOSED-DATE": "30-05-2021",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "May:2021,XXX/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "0",
            "INTEREST-RATE": "58.871",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "PDL12935472",
            "CREDIT-GUARANTOR": "KOTAK MAHINDRA BANK",
            "ACCT-TYPE": "Personal Loan",
            "DATE-REPORTED": "30-11-2024",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "4,500",
            "DISBURSED-DT": "24-10-2024",
            "LAST-PAYMENT-DATE": "13-11-2024",
            "CLOSED-DATE": "17-11-2024",
            "INSTALLMENT-AMT": "4,518",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "Nov:2024,000/XXX|Oct:2024,000/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "1",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "TBLV05-11224-9456628",
            "CREDIT-GUARANTOR": "TRUE CREDITS PRIVATE LIMITED",
            "ACCT-TYPE": "Personal Loan",
            "DATE-REPORTED": "19-06-2023",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "2,930",
            "DISBURSED-DT": "24-12-2021",
            "LAST-PAYMENT-DATE": "13-04-2022",
            "CLOSED-DATE": "19-06-2023",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "Jun:2023,000/STD|May:2023,XXX/XXX|Apr:2023,XXX/XXX|Mar:2023,XXX/XXX|Feb:2023,XXX/XXX|Jan:2023,XXX/XXX|Dec:2022,XXX/XXX|Nov:2022,XXX/XXX|Oct:2022,XXX/XXX|Sep:2022,XXX/XXX|Aug:2022,XXX/XXX|Jul:2022,XXX/XXX|Jun:2022,XXX/XXX|May:2022,086/XXX|Apr:2022,066/XXX|Mar:2022,067/XXX|Feb:2022,036/XXX|Jan:2022,008/XXX|Dec:2021,XXX/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "0",
            "INTEREST-RATE": "117.742",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "FLIPKART-108143791",
            "CREDIT-GUARANTOR": "IDFC",
            "ACCT-TYPE": "Consumer Loan",
            "DATE-REPORTED": "25-05-2025",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Closed",
            "DISBURSED-AMT": "2,000",
            "DISBURSED-DT": "17-03-2023",
            "LAST-PAYMENT-DATE": "01-06-2023",
            "CLOSED-DATE": "25-05-2025",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "0",
            "COMBINED-PAYMENT-HISTORY": "May:2025,000/XXX|Apr:2025,000/XXX|Mar:2025,000/XXX|Feb:2025,000/XXX|Jan:2025,000/XXX|Dec:2024,000/XXX|Nov:2024,000/XXX|Oct:2024,000/XXX|Sep:2024,000/XXX|Aug:2024,000/XXX|Jul:2024,000/XXX|Jun:2024,000/XXX|May:2024,000/XXX|Apr:2024,000/XXX|Mar:2024,000/XXX|Feb:2024,000/XXX|Jan:2024,000/XXX|Dec:2023,000/XXX|Nov:2023,000/XXX|Oct:2023,000/XXX|Sep:2023,000/XXX|Aug:2023,000/XXX|Jul:2023,000/XXX|Jun:2023,000/XXX|May:2023,000/XXX|Apr:2023,000/XXX|Mar:2023,000/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "84",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed",
            "ACTUAL-PAYMENT": "2,481"
          }
        },
        {
          "LOAN-DETAILS": {
            "ACCT-NUMBER": "XXXXXXXXXXX8597",
            "CREDIT-GUARANTOR": "AXIS BANK",
            "ACCT-TYPE": "Credit Card",
            "DATE-REPORTED": "13-12-2025",
            "OWNERSHIP-IND": "Individual",
            "ACCOUNT-STATUS": "Active",
            "DISBURSED-AMT": "23,692",
            "DISBURSED-DT": "24-05-2024",
            "OVERDUE-AMT": "0",
            "WRITE-OFF-AMT": "0",
            "CURRENT-BAL": "14,568",
            "COMBINED-PAYMENT-HISTORY": "Dec:2025,000/XXX|Nov:2025,000/XXX|Oct:2025,000/XXX|Sep:2025,000/XXX|Aug:2025,000/XXX|Jul:2025,000/XXX|Jun:2025,000/XXX|May:2025,000/XXX|Apr:2025,029/XXX|Mar:2025,000/XXX|Feb:2025,088/XXX|Jan:2025,060/XXX|Dec:2024,029/XXX|Nov:2024,029/XXX|Oct:2024,000/XXX|Sep:2024,000/XXX|Aug:2024,000/XXX|Jul:2024,000/XXX|Jun:2024,000/XXX|May:2024,000/XXX|",
            "MATCHED-TYPE": "PRIMARY",
            "LINKED-ACCOUNTS": "",
            "CREDIT-LIMIT": "16,000",
            "SECURITY-DETAILS": "",
            "REPAYMENT-TENURE": "6",
            "SUIT-FILED_WILFUL-DEFAULT": "No Suit filed"
          }
        }
      ]
    },
    "INQUIRY-HISTORY": {
      "HISTORY": {
        "MEMBER-NAME": "HDFC BANK LTD",
        "INQUIRY-DATE": "15-07-2025",
        "PURPOSE": "Personal Loan",
        "OWNERSHIP-TYPE": "PRIMARY",
        "AMOUNT": "1,00,000",
        "REMARK": ""
      }
    },
    "SCORES": {
      "SCORE": {
        "SCORE-TYPE": "PERFORM CONSUMER 2.2",
        "SCORE-VALUE": "675",
        "SCORE-FACTORS": "SF01|SF04|SF20||"
      }
    },
    "verificarionScoreList": "",
    "PRINTABLE-REPORT": {
      "TYPE": "",
      "FILE-NAME": "",
      "CONTENT": ""
    },
    "enhanceProCcirFlag": "false",
    "ccirFlag": "false"
  };
  const inquiryData = data?.["INQUIRY-HISTORY"]?.["HISTORY"];

  // Normalize: always make HISTORY an array
  const historyArray = Array.isArray(inquiryData) ? inquiryData : [inquiryData];
  function NameVariations({ data }) {

    // Normalize: always make VARIATION an array
    const variations = Array.isArray(data["VARIATION"])
      ? data["VARIATION"]
      : [data["VARIATION"]];

    return (
      <>
        {variations.map((item, index) => (
          <div key={index} className="flex justify-between bg-gray-100 px-2">
            <span className="">{item.VALUE}</span>
            <span className="">{item?.["REPORTED-DATE"]}</span>
          </div>
        ))}
      </>
    );
  }

  function LoanSection({ loan, serial }) {
    const details = loan["LOAN-DETAILS"];

    // Title block
    const title = {
      AccountType: details["ACCT-TYPE"],
      CreditGrantor: details["CREDIT-GUARANTOR"],
      Account: details["ACCT-NUMBER"],
      Info: details["DATE-REPORTED"],
      Status: details["ACCOUNT-STATUS"],
    };

    // Data block
    const data = [
      ["Ownership", details["OWNERSHIP-IND"]],
      ["Disbursed Date", details["DISBURSED-DT"] || ""],
      ["Disbd Amt/High Credit", `₹${details["DISBURSED-AMT"] || ""}`],
      ["Credit Limit", details["CREDIT-LIMIT"] || ""],
      ["Last Payment Date", details["LAST-PAYMENT-DATE"] || ""],
      ["Current Balance", `₹${details["CURRENT-BAL"] || ""}`],
      ["Cash Limit", details["CASH-LIMIT"] || ""],
      ["Closed Date", details["CLOSED-DATE"] || ""],
      ["Last Paid Amt", details["ACTUAL-PAYMENT"] || ""],
      ["InstlAmt/Freq", details["INSTALLMENT-AMT"] || ""],
      ["Tenure (Month)", details["REPAYMENT-TENURE"] || ""],
      ["Overdue Amt", `₹${details["OVERDUE-AMT"] || ""}`],
    ];

    // Payment history parsing
    const headers = [
      "",
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ];

    // Convert "COMBINED-PAYMENT-HISTORY" into a row
    const history = details["COMBINED-PAYMENT-HISTORY"] || "";
    const historyMap = {};
    history.split("|").forEach((entry) => {
      if (!entry) return;
      const [monthYear, status] = entry.split(",");
      const [month, year] = monthYear.split(":");
      historyMap[month] = status;
      historyMap["year"] = year;
    });

    const rows = [
      [
        historyMap["year"] || "",
        historyMap["January"] || "",
        historyMap["February"] || "",
        historyMap["March"] || "",
        historyMap["April"] || "",
        historyMap["May"] || "",
        historyMap["June"] || "",
        historyMap["July"] || "",
        historyMap["August"] || "",
        historyMap["September"] || "",
        historyMap["October"] || "",
        historyMap["November"] || "",
        historyMap["December"] || "",
      ],
    ];
    return (
      <Section title="Account Information">
        <AccountBlock id={serial} title={title} data={data} />
        <div className="px-6 py-0 mt-[-15px]">
          <SimpleTable2 headers={headers} rows={rows} />
        </div>
      </Section>
    );
  }

  function LoanList({ responses }) {
    return (
      <div>
        {responses["RESPONSE"].map((loan, index) => (
          <LoanSection key={index} loan={loan} serial={index + 1} />
        ))}
      </div>
    );
  }
  return (
    <>
      <div className="pdf-content">
        {/* A4 PDF Container */}
        {/* <div className="w-[794px] min-h-[1123px] bg-white text-[11px] text-gray-800 shadow-xl"> */}
        <div className="w-full m-auto min-h-[1123px] bg-white text-[11px] text-gray-800">
          {/* ================= HEADER ================= */}
          <div className="px-6 pt-6 pb-3 flex justify-between items-center gap-5 border-b border-b-gray-300">
            <div className="w-[150px]">
              <img className="w-full rounded-md" src={crif} alt="" />
            </div>

            <div>
              <h1 className="text-lg font-bold uppercase text-blue-900">
                Consumer Base™ Report
              </h1>
              <p className="font-bold float-right">For {data.REQUEST.NAME}</p>
            </div>

            {/* ================= META INFO ================= */}
            <div className="py-4 gap-y-2">
              <p className="font-bold">
                <span className="text-blue-900">CHM Ref #:</span>{" "}
                {data.HEADER?.["REPORT-ID"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Application ID:</span> -
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Prepared For:</span> JUNOON
                CAPITAL SERVICES PRIVATE LIMITED
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Request:</span> {data.HEADER?.["DATE-OF-REQUEST"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Issue:</span> {data.HEADER?.["DATE-OF-ISSUE"]}
              </p>
            </div>
          </div>

          {/* ================= INQUIRY INPUT ================= */}
          <Section title="Inquiry Input Information">
            <InfoGrid
              data={[
                ["Name", `${data.REQUEST.NAME}`],
                ["DOB", `${data.REQUEST.DOB}`],
                ["Gender", "Male"],
                ["Father", "Gopal Singh"],
                ["Spouse", ""],
                ["Mother", ""],
                ["Phone Number", `${data.REQUEST?.["PHONE-1"]}`],
                ["Id(s)", `${data.REQUEST.PAN}[PAN]`], //367269367630[CYC]
                ["Email Id(s)", `${data.REQUEST?.["EMAIL-1"]}`],
              ]} />
            <p className="mt-2 text-[12px] font-bold px-3">
              <span className="text-blue-900">Entity Id</span>
            </p>
            <p className="mt-2 text-[12px] font-bold px-3">
              <span className="text-blue-900">Current Address:</span>
              {data?.["PERSONAL-INFO-VARIATION"]?.["ADDRESS-VARIATIONS"].VARIATION[0].VALUE}
            </p>
            <p className="mt-2 text-[12px] font-bold px-3">
              <span className="text-blue-900">Other Address:</span>
              {data?.["PERSONAL-INFO-VARIATION"]?.["ADDRESS-VARIATIONS"].VARIATION[1].VALUE}
            </p>
          </Section>

          {/* ================= SCORE ================= */}
          <Section title="CRIF HM Score(s):">
            <table className="w-full">
              <thead className="text-blue-950/80 uppercase text-left">
                <tr>
                  <th className="p-1">Score Name</th>
                  <th className="p-1">Score</th>
                  <th className="p-1">Scoring Factors</th>
                </tr>
              </thead>
              <tbody className="bg-blue-100/60">
                <tr>
                  <td className="p-1 font-bold">{data.SCORES?.SCORE?.["SCORE-TYPE"]}</td>
                  <td className="p-1">
                    <span className="text-xl font-bold">{data.SCORES?.SCORE?.["SCORE-VALUE"]}</span>{" "}
                    <span className="text-md font-medium text-gray-500">
                      Score Range : 300-900
                    </span>
                  </td>
                  <td className="p-1 font-bold">
                    <ul>
                      <li className="flex items-center gap-2">
                        <span className="w-[5px] h-[5px] bg-green-700 block"></span>
                        <span>No missed payments, healthy balance ratio</span>
                      </li>

                      <li className="flex items-center gap-2">
                        <span className="w-[5px] h-[5px] bg-green-700 block"></span>
                        <span>
                          Normal proportion of outstanding balance to disbursed
                          amount
                        </span>
                      </li>
                    </ul>
                  </td>
                </tr>
              </tbody>
            </table>
            <div className="justify-end flex items-center gap-3">
              <p>Tip : </p>
              <p className="flex items-center gap-1">
                {" "}
                <div className="w-[5px] h-[5px] bg-green-500"></div>Positive
                impact on credit score
              </p>
              <p className="flex items-center gap-1">
                {" "}
                <div className="w-[5px] h-[5px] bg-red-500"></div>Negative impact
                on credit score
              </p>
            </div>
          </Section>

          {/* ================= VARIATIONS ================= */}
          <Section
            title="Personal Information – Variations"
            note="Tip: These are applicant's personal information variations as contributed by various financial institutions."
          >
            <div className="w-full text-[14px]">
              {/* HEADER BAR */}

              {/* CONTENT */}
              <div className="grid grid-cols-3 gap-6 px-4 py-1 font-bold text-[13px]">
                {/* LEFT SECTION */}
                <div className="col-span-2 space-y-2">
                  {/* NAME VARIATIONS */}
                  <div>
                    <div className="flex justify-between  text-[#0f3c64] border-b border-blue-300">
                      <span>Name Variations</span>
                      <span>Reported On</span>
                    </div>


                    <NameVariations data={data?.["PERSONAL-INFO-VARIATION"]["NAME-VARIATIONS"]} />



                  </div>

                  {/* ADDRESS VARIATIONS */}
                  <div>
                    <div className="flex justify-between  text-[#0f3c64] border-b border-blue-300">
                      <span>Address Variations</span>
                      <span>Reported On</span>
                    </div>

                    <NameVariations data={data?.["PERSONAL-INFO-VARIATION"]["ADDRESS-VARIATIONS"]} />

                  </div>
                </div>

                {/* RIGHT SECTION */}
                <div className="space-y-3">
                  {/* DOB */}
                  <div>
                    <div className="flex justify-between  text-[#0f3c64] border-b border-blue-300">
                      <span>DOB Variations</span>
                      <span>Reported On</span>
                    </div>

                    <NameVariations data={data?.["PERSONAL-INFO-VARIATION"]["DATE-OF-BIRTH-VARIATIONS"]} />
                  </div>

                  {/* PHONE */}
                  <div>
                    <div className="flex justify-between  text-[#0f3c64] border-b border-blue-300">
                      <span>Phone Variations</span>
                      <span>Reported On</span>
                    </div>

                    <NameVariations data={data?.["PERSONAL-INFO-VARIATION"]["PHONE-NUMBER-VARIATIONS"]} />
                  </div>

                  {/* ID */}
                  <div>
                    <div className="flex justify-between  text-[#0f3c64] border-b border-blue-300">
                      <span>ID Variations</span>
                      <span>Reported On</span>
                    </div>

                    <NameVariations data={data?.["PERSONAL-INFO-VARIATION"]["PAN-VARIATIONS"]} /><span>[PAN]</span>
                  </div>
                </div>
              </div>
            </div>
          </Section>

          {/* ================= ACCOUNT SUMMARY ================= */}
          <Section
            title="Account Summary"
            note="Tip: These are applicant's personal information variations as contributed by various financial institutions."
            notet="Tip: All amounts are in INR."
          >
            <SimpleTable
              border={true}
              headers={[
                "Type",
                "Number of Account(s)",
                "Active Account(s)",
                "Overdue Account(s)",
                "Current Balance",
                "Amt Disbd/High Credit",
              ]}

              rows={[
                [
                  "Primary Match",
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-NUMBER-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-ACTIVE-NUMBER-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-OVERDUE-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-CURRENT-BALANCE"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-DISBURSED-AMOUNT"] || 0
                ],
                [
                  "Total",
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-NUMBER-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-ACTIVE-NUMBER-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-OVERDUE-OF-ACCOUNTS"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-CURRENT-BALANCE"] || 0,
                  data?.["ACCOUNTS-SUMMARY"]?.["PRIMARY-ACCOUNTS-SUMMARY"]?.["PRIMARY-DISBURSED-AMOUNT"] || 0
                ]
              ]}
            />
            <div className="flex justify-between border-3 border-blue-200 border-t-transparent px-1 mt-[-5px]">
              <p className="mt-2 text-blue-900 font-bold">
                Inquiries in last 24 Months: <span className="text-black">1</span>
              </p>
              <p className="mt-2 text-blue-900 font-bold">
                New Account(s) in last 6 Months:{" "}
                <span className="text-black">0</span>
              </p>
              <p className="mt-2 text-blue-900 font-bold">
                New Delinquent Account(s) in last 6 Months:{" "}
                <span className="text-black">0</span>
              </p>
            </div>
          </Section>

          {/* ================= ACCOUNT DETAILS ================= */}

          <LoanList responses={data?.RESPONSES} />
          


          {/* ================= HEADER ADVANCE OVERLAPE REPORT ================= */}
          <div className="px-6 pt-6 pb-3 flex justify-between items-center gap-5 border-b border-b-gray-300">
            <div className="w-[150px]">
              <img className="w-full rounded-md" src="/crif.png" alt="" />
            </div>

            <div>
              <h1 className="text-lg font-bold uppercase text-blue-900">
                ADVANCED OVERLAP REPORT
              </h1>
              <p className="font-bold float-right">For {data.REQUEST.NAME}</p>
            </div>

            {/* ================= META INFO ================= */}
            <div className="py-4 gap-y-2">
              <p className="font-bold">
                <span className="text-blue-900">CHM Ref #:</span>{" "}
                {data.HEADER?.["REPORT-ID"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Application ID:</span> -
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Prepared For:</span> JUNOON
                CAPITAL SERVICES PRIVATE LIMITED
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Request:</span> {data.HEADER?.["DATE-OF-REQUEST"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Issue:</span> {data.HEADER?.["DATE-OF-ISSUE"]}
              </p>
            </div>
          </div>

          <Section
            title="Summary"
            note="Tip: Current Balance, Disbursed Amount & Instalment Amount is considered ONLY for ACTIVE account"
            notet="Tip: All amounts are in INR"
          >
            <div>
              <table className="w-full text-[12px] border-3 border-blue-200">
                {/* ================= TABLE HEADER ================= */}
                <thead className="border-b-1 border-blue-200">
                  {/* FIRST HEADER ROW */}
                  <tr className="text-blue-900 font-semibold text-left leading-3.5">
                    <th rowSpan={2} className="px-1 align-middle">
                      Type
                    </th>

                    <th colSpan={2} className="px-1 text-center">
                      Association
                    </th>

                    <th colSpan={3} className="px-1 text-center">
                      Account Summary
                    </th>

                    <th colSpan={2} className="px-1 text-center">
                      Disbursed Amount
                    </th>

                    <th colSpan={2} className="px-1 text-center">
                      Installment Amount
                    </th>

                    <th colSpan={2} className="px-1 text-center">
                      Current Balance
                    </th>
                  </tr>

                  {/* SECOND HEADER ROW */}
                  <tr className="text-center font-semibold">
                    {/* Association */}
                    <th className="p-1">Own</th>
                    <th className="p-1">Others</th>

                    {/* Account Summary */}
                    <th className="p-1">Total</th>
                    <th className="p-1">Active</th>
                    <th className="p-1">Overdue</th>

                    {/* Disbursed Amount */}
                    <th className="p-1">Own</th>
                    <th className="p-1">Others</th>

                    {/* Installment Amount */}
                    <th className="p-1">Own</th>
                    <th className="p-1">Others</th>

                    {/* Current Balance */}
                    <th className="p-1">Own</th>
                    <th className="p-1">Others</th>
                  </tr>
                </thead>

                {/* ================= TABLE BODY ================= */}
                <tbody>
                  <tr>
                    <td className="p-1 font-semibold">Primary Match</td>

                    {/* Association */}
                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>

                    {/* Account Summary */}
                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>

                    {/* Disbursed Amount */}
                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center">-</td>

                    {/* Installment Amount */}
                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center">-</td>

                    {/* Current Balance */}
                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center"></td>
                  </tr>

                  {/* TOTAL ROW */}
                  <tr className="font-semibold">
                    <td className="p-1">Secondary Match</td>

                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>

                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>
                    <td className="p-1 text-center">0</td>

                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center">-</td>

                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center">-</td>

                    <td className="p-1 text-center">-</td>
                    <td className="p-1 text-center">-</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </Section>

          <Section title="Account Details - Primary"></Section>

          {/* ================= HEADER ADVANCE OVERLAPE REPORT ================= */}
          <div className="px-6 pt-6 pb-3 flex justify-between items-center gap-5 border-b border-b-gray-300">
            <div className="w-[150px]">
              <img className="w-full rounded-md" src="/crif.png" alt="" />
            </div>

            <div>
              <h1 className="text-lg font-bold uppercase text-blue-900">
                GROUP DETAILS
              </h1>
            </div>

            {/* ================= META INFO ================= */}
            <div className="py-4 gap-y-2">
              <p className="font-bold">
                <span className="text-blue-900">CHM Ref #:</span>{" "}
                {data.HEADER?.["REPORT-ID"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Application ID:</span> -
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Prepared For:</span> JUNOON
                CAPITAL SERVICES PRIVATE LIMITED
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Request:</span> {data.HEADER?.["DATE-OF-REQUEST"]}
              </p>
              <p className="font-bold">
                <span className="text-blue-900">Date of Issue:</span> {data.HEADER?.["DATE-OF-ISSUE"]}
              </p>
            </div>
          </div>
          {/* ================= Summary GT ================= */}

          <Section
            title="Summary"
            note="Tip: Current Balance, Disbursed Amount & Instalment Amount is considered ONLY for ACTIVE account"
            notet="Tip: All amounts are in INR"
          >
            <div>
              <table className="w-full border-3 border-blue-200 text-[12px] border-collapse">
                {/* ================= TABLE HEADER ================= */}
                <thead className="border-b-1 border-blue-200">
                  {/* FIRST HEADER ROW */}
                  <tr className="text-blue-900 font-semibold text-center">
                    <th rowSpan={2} className="px-1 align-middle">
                      Type
                    </th>

                    <th colSpan={2} className="px-1">
                      Association
                    </th>

                    <th colSpan={3} className="px-1">
                      Account Summary
                    </th>

                    <th colSpan={2} className="px-1">
                      Disbursed Amount
                    </th>

                    <th colSpan={2} className="px-1">
                      Installment Amount
                    </th>

                    <th colSpan={2} className="px-1">
                      Current Balance
                    </th>
                  </tr>

                  {/* SECOND HEADER ROW */}
                  <tr className="text-center font-semibold">
                    {/* Association */}
                    <th className="px-1">Own</th>
                    <th className="px-1">Others</th>

                    {/* Account Summary */}
                    <th className="px-1">Total</th>
                    <th className="px-1">Active</th>
                    <th className="px-1">Overdue</th>

                    {/* Disbursed Amount */}
                    <th className="px-1">Own</th>
                    <th className="px-1">Others</th>

                    {/* Installment Amount */}
                    <th className="px-1">Own</th>
                    <th className="px-1">Others</th>

                    {/* Current Balance */}
                    <th className="px-1">Own</th>
                    <th className="px-1">Others</th>
                  </tr>
                </thead>

                {/* ================= TABLE BODY ================= */}
                <tbody>
                  <tr>
                    <td className="p-1 font-semibold">Primary Match</td>

                    {/* Association */}
                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>

                    {/* Account Summary */}
                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>

                    {/* Disbursed Amount */}
                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>

                    {/* Installment Amount */}
                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>

                    {/* Current Balance */}
                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>
                  </tr>

                  {/* TOTAL ROW */}
                  <tr className="font-semibold">
                    <td className="px-1">Total</td>

                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>

                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>
                    <td className="px-1 text-center">0</td>

                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>

                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>

                    <td className="px-1 text-center">-</td>
                    <td className="px-1 text-center">-</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </Section>

          <Section title="Account Details - Primary"></Section>

          {/* ================= INQUIRIES ================= */}


          <Section title="Inquiries (reported Last 24 Months)">
            <SimpleTable
              headers={[
                "Credit Grantor",
                "Date of Inquiry",
                "Purpose",
                "Amount",
                "Remark",
              ]}
              rows={historyArray.map((item) => [
                item["MEMBER-NAME"],
                item["INQUIRY-DATE"],
                item["PURPOSE"],
                `₹${item["AMOUNT"]}`,
                item["REMARK"],
              ])}
            />
            <p className="text-center text-[15px] font-semibold text-blue-950/80">
              -END OF INDIVIDUAL REPORT-
            </p>
          </Section>

          {/* ================= Appendix ================= */}
          <Section title="Appendix">
            <SimpleTable
              headers={["Section", "Code", "Description"]}
              rows={[
                [
                  "Account Summary",
                  "Number of Delinquent Accounts",
                  "Indicates number of accounts that the applicant has defaulted on within the last 6 months",
                ],
                [
                  "Account Information – Credit Grantor",
                  "XXXX",
                  "Name of grantor undisclosed as credit grantor is different from inquiring institution",
                ],
                [
                  "Account Information – Account #",
                  "xxxx",
                  "Account Number undisclosed as credit grantor is different from inquiring institution",
                ],
                [
                  "Payment History / Asset Classification",
                  "XXX",
                  "Data not reported by institution",
                ],
                [
                  "Payment History / Asset Classification",
                  "-",
                  "Not applicable",
                ],
                [
                  "Payment History / Asset Classification",
                  "STD",
                  "Account Reported as STANDARD Asset",
                ],
                [
                  "Payment History / Asset Classification",
                  "SUB",
                  "Account Reported as SUB-STANDARD Asset",
                ],
                [
                  "Payment History / Asset Classification",
                  "DBT",
                  "Account Reported as DOUBTFUL Asset",
                ],
                [
                  "Payment History / Asset Classification",
                  "LOS",
                  "Account Reported as LOSS Asset",
                ],
                [
                  "Payment History / Asset Classification",
                  "SMA",
                  "Account Reported as SPECIAL MENTION",
                ],
                [
                  "Account Information – Account #",
                  "CI-Ceased/Membership Terminated",
                  "Credit Institution has Ceased to Operate or Membership Terminated",
                ],
                [
                  "Account Information – Account #",
                  "License Cancelled Entities",
                  "License of the credit institution cancelled by RBI",
                ],
              ]}
            />
          </Section>

          <div className="print-disclaimer px-6 text-[10px] leading-relaxed text-gray-400 font-medium pt-10">
            <p>
              <b>Disclaimer:</b> This document is prepared based on the data
              submitted by member institutions of CRIF High Mark Credit Information
              Services Private Limited (CRIF High Mark) and by using the proprietary
              match logic of CRIF High Mark. No alterations are made to the data
              submitted by member institutions and the same is up to date as well as
              accurate to the best of its knowledge. By using data contained in this
              document, the user acknowledges that CRIF High Mark is not responsible
              for errors/omissions resulting from submission of erroneous data from
              Members to CRIF High Mark. This document may not be used or disclosed
              to others, except with the written permission of CRIF High Mark. Any
              paper copy of this document will be considered uncontrolled. If you
              are not the intended recipient, you are not authorized to read, print,
              retain, copy, disseminate, distribute or use this information or any
              part thereof. PERFORM score provided in this document is joint work of
              CRIF SPA (Italy) and CRIF High Mark (India). For any assistance on
              this report, reach out to us at: customerservice@crifhighmark.com
            </p>

            <div className="text-gray-400 text-center text-[10px] flex justify-between font-semibold mt-2">
              <p>© Copyright 2025. All rights reserved</p>
              <p>CRIF High Mark Credit Information Services Pvt. Ltd</p>
              <p>Confidential</p>
            </div>
          </div>

        </div>
      </div>
    </>
  );
}

/* ================= REUSABLE COMPONENTS ================= */

const Section = ({ title, children, note, notet }) => (
  <div className="px-6 pt-6 pb-0">
    {notet && (
      <span className="text-gray-400 text-[9px] text-right block">{notet}</span>
    )}
    <h2
      className={`text-white font-semibold pl-3 ${!note && "mb-3"
        } text-lg bg-blue-950/90`}
    >
      {title}
    </h2>
    {note && (
      <span className="text-gray-400 text-[9px] text-right block mb-3">
        {note}
      </span>
    )}
    {children}
  </div>
);

const InfoGrid = ({ data }) => (
  <div className="grid grid-cols-3 gap-y-1 px-3">
    {data.map(([k, v], i) => (
      <p
        className="grid grid-cols-[120px_1fr] text-[12px] font-bold"
        key={i}
      >
        <span className="text-blue-900">{k}:</span>
        <span>{v}</span>
      </p>

    ))}
  </div>
);

const SimpleTable = ({ headers, rows, border }) => (
  <table
    className={`w-full border-b-transparent ${border && "border-3 border-blue-200"
      }`}
  >
    <thead className="text-blue-900 text-left">
      <tr>
        {headers.map((h, i) => (
          <th key={i} className="p-1 border-b border-blue-200">
            {h}
          </th>
        ))}
      </tr>
    </thead>
    <tbody>
      {rows.map((r, i) => (
        <tr key={i}>
          {r.map((c, j) => (
            <td key={j} className="text-md p-1 font-bold">
              {c}
            </td>
          ))}
        </tr>
      ))}
    </tbody>
  </table>
);

const SimpleTable2 = ({ headers, rows, title }) => (
  <div className="w-full">
    <p className="text-blue-950/80 font-bold text-md">
      Payment History/Asset Classification:
    </p>
    <table className="w-full border">
      <thead className="bg-blue-100/50 text-white">
        <tr>
          {headers.map((h, i) => (
            <th key={i} className="border border-gray-300 text-black px-1">
              {h}
            </th>
          ))}
        </tr>
      </thead>
      <tbody>
        {rows.map((r, i) => (
          <tr key={i}>
            {r.map((c, j) => (
              <td
                key={j}
                className="border border-gray-300 text-md px-1 font-bold"
              >
                {c || "-"}
              </td>
            ))}
          </tr>
        ))}
      </tbody>
    </table>
  </div>
);

const AccountBlock = ({ id, title, data }) => (
  
  <div className="mb-4">
    {/* HEADER */}
    <div className="bg-blue-50 font-semibold flex items-center gap-2">
      {/* BEFORE CONTENT */}
      <span className="bg-blue-900 text-white text-xs px-2 py-0.5">{id}</span>

      <div className="flex justify-between w-full flex-wrap gap-3">
        <p className="text-md">
          <span className="text-blue-900 font-bold">Account Type:</span>{" "}
          <span className="text-red-800 uppercase font-bold text-[14px]">
            {title.AccountType}
          </span>
        </p>
        <p className="text-md">
          <span className="text-blue-900 font-bold">Credit Grantor:</span>{" "}
          {title.CreditGrantor}
        </p>
        <p className="text-md">
          <span className="text-blue-900 font-bold">Account #:</span>{" "}
          {title.Account}
        </p>
        <p className="text-md">
          <span className="text-blue-900 font-bold">Info. as of:</span>{" "}
          {title.Info}
        </p>
      </div>
    </div>

    {/* BODY */}
    <div className="relative">
      <div
  className={`font-semibold text-lg absolute top-7 left-[-40px] rotate-90 px-5 py-0 ${
    title?.Status=="Closed"
      ? "bg-red-200 text-red-600"
      : "bg-[#E1F0BE]"
  }`}
>
  {title?.Status=="Closed" ? "CLOSED" : "ACTIVE"}
</div>

      <div className="grid grid-cols-3 my-2 p-3 px-5 pl-10 text-xs relative">
        {data.map(([k, v], i) => (
          <p className="grid grid-cols-[140px_1fr] font-semibold" key={i}>
            <span className="text-blue-950 font-bold">{k}:</span>
            <span className="font-bold">{v}</span>
          </p>
        ))}
      </div>
    </div>
  </div>
);

export default CRIFReportData;
